---
title: 文件在线转base64字符串和base64字符串在线转图片
date: 2020-05-12 16:16:10
categories: 在线工具
tags:
  - 在线转换
  - base64编码
  - 文件转base64
  - base64转图片
---

本页面提供了文件转base64字符串以及base64字符串转图片的功能。
你也可以直接在本文链接后面加入参数base64Str，值为图片的base64编码,例如
[https://www.lixf.io/2020/05/12/file-to-base64-and-base64-to-img/?base64Str=data:image/png;base64,xxxxxxxxx](https://www.lixf.io/2020/05/12/file-to-base64-and-base64-to-img/?base64Str=data:image/png;base64,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)
可直接打开上面链接查看示例

<div>
        <div id="dropbox" style="width:100%;padding: 40px 0px;border:1px solid black;text-align: center;"><input type="file" id="input" onchange="handleFiles(this.files)"></div>
        <div id="fileinfo" style="ont-size: 14px;">文件名:<span id="filename">未知</span>&nbsp;&nbsp;文件大小:<span id="filesize">未知</span>&nbsp;&nbsp; 文件类型:<span id="filetype">未知</span>&nbsp;&nbsp; <button style="padding: 1px 6px;" id="base64ToImgBtn">转图片</button>&nbsp;&nbsp; <button style="padding: 1px 6px;" id="clearBtn">清空结果</button></div></div>
        <div><textarea id="result" style="width:100%;height: 600px;"></textarea></div>
</div>
<script>
    let dropbox = document.getElementById("dropbox");
    let filename = document.getElementById("filename");
    let filetype = document.getElementById("filetype");
    let filesize = document.getElementById("filesize");
    let base64result = document.getElementById("result");
    let base64ToImgBtn = document.getElementById("base64ToImgBtn")
    let clearBtn = document.getElementById("clearBtn")
    dropbox.addEventListener("dragenter", e => {
        e.stopPropagation();
        e.preventDefault();
        dropbox.style.border = "2px solid green"
    }, false);
    dropbox.addEventListener("dragleave", e => {
        e.stopPropagation();
        e.preventDefault();
        dropbox.style.border = "1px solid black"
    }, false);
    dropbox.addEventListener("dragover", e => {
        e.stopPropagation();
        e.preventDefault();
    }, false);
    dropbox.addEventListener("drop", e => {
        e.stopPropagation();
        e.preventDefault();
        var dt = e.dataTransfer;
        let files = dt.files;
        handleFiles(files);
    }, false);
    clearBtn.addEventListener("click",()=>{
        base64result.value = ""
    })
    base64ToImgBtn.addEventListener("click",()=>{
        let popup = document.getElementById('popup')
        if(popup){
            popup.parentNode.remove(popup)
        }
        let base64Str = base64result.value
            showBase64Pic(base64Str)
    })
    let base64Str = getQueryVariable("base64Str")
    if(base64Str){
         base64result.value = base64Str
        showBase64Pic(base64Str)
    }
    function handleFiles(files) {
        if (files.length > 0) {
            base64result.value = "正在处理中，请稍后"
            let file = files[0];
            let fileSize = file.size;
            let fileName = file.name;
            let fileType = file.type;
            filename.innerText = fileName;
            filetype.innerText = fileType;
            filesize.innerText = wellFileSize(fileSize);
            if (fileSize <= 1024 * 1024 * 3) {
                let reader = new FileReader();
                reader.onload = e => {
                    base64result.value = e.target.result;
                }
                reader.readAsDataURL(file);
            } else {
                base64result.value = "文件太大了，请选择小于3M的文件";
            }
        }else{
            base64result.value = "请选择一个文件";
        }
    }
    function wellFileSize(size) {
        if (size <= 1024) {   // byte
            return size + "byte";
        } else if (size <= 1024 * 1024) {   //kb
            return (size / 1024).toFixed(2) + "kb";
        } else if (size <= 1024 * 1024 * 1024) {  // mb
            return (size / (1024 * 1024)).toFixed(2) + "mb";
        } else { //gb
            return (size / (1024 * 1024 * 1024)).toFixed(2) + "gb";
        }
    }
    function showBase64Pic(base64Str){
            let pop = document.createElement("div")
                pop.innerHTML = `
                <div id="popup" style="position:fixed;top:0px;right:0px;left:0px;bottom:0px;background:rgba(0,0,0,0.8);z-index:99999" onclick="let popup=document.getElementById('popup');popup.parentNode.remove(popup);">
            <div id="popup" style="position:relative;width:80%;margin-left:10%;margin-right:10%;text-align:center;margin-top:80px;background:white;border:1px solid #adc2d7;box-shadow: 1px 2px 3px #adc2d7;padding:20px 0px;" onclick="var event = arguments[0] || window.event;event.stopPropagation()">
                <button style="position:absolute;right:0px;top:0px;padding:5px 15px" onclick="let popup=document.getElementById('popup');popup.parentNode.remove(popup);">关闭</button><br>
                <span id="loaderror" style="color:red"></span>
                <img id="base64img" style="max-width:80%;max-height:calc(100vh - 200px);" src="${base64Str}" onerror="document.getElementById('loaderror').innerHTML='这不是一个有效的图片的Base64字符串';document.getElementById('base64img').style.display='none'">
                </div>
                </div>
            `
                document.body.appendChild(pop)
        }
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) { return pair[1]; }
            }
            return (false);
        }
</script>
